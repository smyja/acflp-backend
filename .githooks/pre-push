#!/usr/bin/env bash
set -euo pipefail

REPO_ROOT="$(git rev-parse --show-toplevel 2>/dev/null || pwd)"
if [ -f "$REPO_ROOT/.venv/bin/activate" ]; then
  # shellcheck disable=SC1091
  . "$REPO_ROOT/.venv/bin/activate" || true
fi

if command -v pre-commit >/dev/null 2>&1; then
  exec pre-commit run --hook-stage pre-push "$@"
fi

echo "[githooks] pre-commit not found; skipping pre-push checks. Run 'make install-dev' to enable." >&2
exit 0
